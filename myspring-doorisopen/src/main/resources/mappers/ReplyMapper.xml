<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="org.doorisopen.myspring.Board.ReplyMapper">

	<!-- 댓글 등록 -->
	<insert id="ReplyCreate" parameterType="ReplyVO">
	INSERT INTO
	reply 
	(
		boardIdx,
		replyContent,
		writer,
		writeDate,
		modifyDate,
	) VALUES (
		#{boardIdx},
		#{replyContent},
		#{writer},
		now(),
		now()
	)
	</insert>
	
    <!-- 댓글 리스트 -->
    <select id="ReplyRead" resultType="ReplyVO">
 	 <![CDATA[
		SELECT
			*
		FROM
			reply
		WHERE
			boardIdx = #{boardIdx}
		AND
			enabled = '1'
		ORDER BY 
			writeDate desc
 	 ]]> 
 	</select>
 	
 	
    <!-- 댓글 수정 -->
    <update id="ReplyUpdate">
    	UPDATE
    		reply
    	SET
    		replyContent = #{replyContent}
			, modifier = #{modifier}
			, modifyDate = now()
		WHERE
			replyIdx = #{replyIdx}
 	</update>
 	
    <!-- 댓글 삭제 -->
    <delete id="ReplyDelete">
    	UPDATE
    		reply
    	SET
    		enabled = '0'
    	WHERE
    		replyIdx = #{replyIdx}
 	</delete>
 	
 	
</mapper>